<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Gr-plc by roeebar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Gr-plc</h1>
      <h2 class="project-tagline">Open IEEE 1901 Software Implementation</h2>
      <a href="https://github.com/roeebar/gr-plc" class="btn">View on GitHub</a>
      <a href="https://github.com/roeebar/gr-plc/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/roeebar/gr-plc/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p>IEEE 1901 is a standard for high speed communication protocol via electric powerlines. The aim of this project is to provide an open source software implementation of IEEE 1901 physical layer. The software can then be used in software-defined radio (SDR) systems. </p>

<p>Gr-plc is a C++ implementation of IEEE 1901, designed to work in GNU Radio. GNU Radio is a free software development toolkit that provides signal processing blocks to implement SDR and signal-processing systems. The system was tested using Ettus USRP N210 and the LFRX and LFTX daughterboards.</p>

<p>The gr-plc module includes the following GNU Radio blocks:</p>

<ul>
<li>PHY Rx - receives IEEE 1901 frames</li>
<li>PHY Tx - transmits IEEE 1901 frame</li>
<li>PHY - an hierarchy block that includes the PHY In and PHY Out</li>
<li>MAC - a simplified IEEE 1901 MAC layer </li>
<li>APP In - a simple APP layer sink</li>
<li>APP Out - a simple APP layer source</li>
</ul>

<p>The important blocks are the PHY Rx and PHY Tx which contain the actual implementation of the IEEE 1901 physical layer. The PHY Rx includes the following:</p>

<ul>
<li>Frame detection and alignment algorithm</li>
<li>Turbo decoder (incompatible with IEEE 1901)</li>
<li>Several channel estimation methods</li>
<li>Support for IEEE 1901 ROBO Modes: Standard ROBO, High-Speed ROBO and Mini ROBO</li>
<li>Support for IEEE 1901 modulation types: BPSK, QPSK, 8-QAM, 16-QAM, 64-QAM, 256-QAM, 1024-QAM and 4096-QAM</li>
<li>Adaptive bit loading algorithm</li>
<li>Noise power spectral density estimation capability</li>
</ul>

<p>The MAC block implements a simplified IEEE 1901 MAC layer and performs master-slave channel access (see More Details below). </p>

<h1>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h1>

<p>Please see the project <a href="https://github.com/roeebar/gr-plc">github page</a>.</p>

<h1>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h1>

<p>A typical two-transceiver flow graph is given in <em>examples/plc.grc</em> and is illustrated below:</p>

<p><img src="figures/tranceiver.png" alt=""></p>

<p>The top part is the master station transceiver, and the bottom part is the slave station transceiver. The master station includes a file source that feeds the APP Out block with a continuous bit stream. The data is processed through the MAC and PHY blocks and then goes to the USRP block. The USRP block sends the signal to an actual USRP hardware through the Ethernet port. The USRP hardware is connected to the powerline.</p>

<p>The powerline is also connected to another USRP hardware, representing the slave station. The USRP sends the data through the same Ethernet port to the slave station USRP block shown in the bottom part of Figure 3.8. Samples from the USRP block are processed through the PHY and MAC blocks and eventually saved to a file through the APP In block.</p>

<p>The two USRP physical devices are paired using a special MIMO cable. This connection synchronizes the two USPRs internal oscillators to avoid a carrier frequency offset.</p>

<p>The return path, from the slave to the master, is not going through the USRP blocks. Instead, the slave PHY block output is fed directly to the master station PHY block.</p>

<h4>
<a id="blocks-parameters" class="anchor" href="#blocks-parameters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Blocks Parameters</h4>

<p>Several parameters in the MAC block are easily configurable. The parameters are described as follows:</p>

<ul>
<li>Role: The parameter sets whether a block is a master or a slave.</li>
<li>Address: The parameter sets the station address. This value is used when the MAC frame is constructed.</li>
<li>Dest Address: The parameter sets the destination station address. This value is used when the MAC frame is formed.</li>
<li>Tone Mode: The parameter sets the tone mode for the station: Standard ROBO, High-Speed ROBO, Mini ROBO or no ROBO mode which uses the negotiated tone map.</li>
<li>Broadcast Mask: The parameter is a mask of 2048 bits which sets the default tone mask.</li>
<li>Sync Mask: The parameter is a mask of 256 bits which sets the tone mask for the preamble SYNCP and SYNCM symbols.</li>
<li>QPSK Mask: The parameter is a mask of 2048 bits which determines which carriers should be forced to QPSK modulation during the bit loading calculation.</li>
<li>Target BER: The parameter sets the target BER for the bit loading calculation.</li>
<li>Channel Estimation: The parameter sets the channel estimation method used by the station.</li>
<li>Inter-frame Space: The parameter sets the minimum space between two adjacent transmitted frames.</li>
</ul>

<p>The PHY block parameters are described as follow:</p>

<ul>
<li>Sensitivity: The parameter corresponds to the preamble detection threshold.</li>
<li>Gain: The parameter controls the transmitted signal gain.</li>
</ul>

<p><em>NOTE: when running the flow graph inside GNU Radio Companion, make sure that the Log parameter is set to "Notice" in all blocks. Otherwise, GRC will become unresponsive as the output window is filled with trace information</em></p>

<h1>
<a id="demo" class="anchor" href="#demo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Demo</h1>

<p>Gr-plc has been used to research the feasibility of in-vechicle powerline communication. 
A video demonstrating gr-plc experimentation in a car is shown below. </p>

<p>Setup:</p>

<ul>
<li>Car model: 2006 Pontiac Solstice</li>
<li>Communication between cigarette lighter to front light</li>
<li>512 OFDM carriers between 6.25MHz to 18.75MHz, -80 dBm/Hz PSD </li>
<li>Front-end equipment: 2 Ettus USRP N210 with LFRX/LFTX, 2 bias tees to block DC component, amplifier in the transmitter</li>
<li>PC running GNU Radio with gr-plc</li>
</ul>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">iframe</span> <span class="pl-e">width</span>=<span class="pl-s"><span class="pl-pds">"</span>560<span class="pl-pds">"</span></span> <span class="pl-e">height</span>=<span class="pl-s"><span class="pl-pds">"</span>315<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>https://www.youtube.com/embed/SNo6mBinul0<span class="pl-pds">"</span></span> <span class="pl-e">frameborder</span>=<span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span> <span class="pl-e">allowfullscreen</span>&gt;&lt;/<span class="pl-ent">iframe</span>&gt;</pre></div>

<h1>
<a id="more-details" class="anchor" href="#more-details" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>More Details</h1>

<p>A more detailed explanation of the parameters and the algorithms used is given in the thesis "In-vehicle powerline communication using software-defined radio":
<a href="https://open.library.ubc.ca/collections/ubctheses/24/items/1.0307515">https://open.library.ubc.ca/collections/ubctheses/24/items/1.0307515</a></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/roeebar/gr-plc">Gr-plc</a> is maintained by <a href="https://github.com/roeebar">roeebar</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
